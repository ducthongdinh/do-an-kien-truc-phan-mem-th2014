<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css" rel="stylesheet">
<link href="https://blackrockdigital.github.io/startbootstrap-sb-admin/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<div class="container">
<h1>Revenue Report</h1>
<br>
<div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Choose Revenue Report
    </button>
    <ul class="dropdown-menu">
      <!-- <li><a class="dropdown-item revenue all">All</a></li>
      <li><a class="dropdown-item revenue day">Day</a></li>
      <li><a class="dropdown-item revenue month">Month</a></li>
      <li><a class="dropdown-item revenue year">Year</a></li> -->
      <li><a href="<%= staff_reports_path %>/revenue/all" class="dropdown-item all">All</a></li>
      <li><a href="<%= staff_reports_path %>/revenue/service" class="dropdown-item service">Service</a></li>
      <li><a href="<%= staff_reports_path %>/revenue/commission" class="dropdown-item commission">Commission</a></li>
    </ul>
</div>
<br>
<br>

<% if @type_report == "all" || @type_report == "service" %>
    <div class="card mb-3">
        <div class="card-header">
            <i class="fa fa-table"></i> Service Revenue Report
        </div>
    </div>
    <table id="service-table" class="table table-striped table-bordered" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Name</th>
                    <th>User count</th>
                    <th>Revenue</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th colspan="3"><center>Total</center></th>
                    <th><%= @total_service_revenue %></th>
                </tr>
            </tfoot>
            <tbody>
                <% @service_revenue_list.each do |service_revenue| %>
                    <tr>
                        <td><%= service_revenue[:ind] %></td>
                        <td><%= service_revenue[:service_name] %></td>
                        <td><%= service_revenue[:count] %></td>
                        <td><%= service_revenue[:revenue] %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    <br>
    <br>
<% end %>

<% if @type_report == "all" || @type_report == "commission" %>
    <div class="card mb-3">
        <div class="card-header">
            <i class="fa fa-table"></i> Commission Revenue Report
        </div>
    </div>
    <table id="commission-table" class="table table-striped table-bordered" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Product Id</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Commission</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th colspan="4"><center>Total</center></th>
                    <th><%= @total_commission_revenue %></th>
                </tr>
            </tfoot>
            <tbody>
                <% @commission_revenue_list.each do |commission_revenue| %>
                    <tr>
                        <td><%= commission_revenue[:ind] %></td>
                        <td><%= commission_revenue[:product_id] %></td>
                        <td><%= commission_revenue[:product_name] %></td>
                        <td><%= commission_revenue[:price] %></td>
                        <td><%= commission_revenue[:commission] %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>
    <br>
    <br>
<% end %>

<% if @type_report == "all" %>
    <div class="card mb-3">
        <div class="card-header">
            <i class="fa fa-table"></i> Total Revenue Report
        </div>
    </div>
    <table id="all-table" class="table table-striped table-bordered" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Name</th>
                    <th>Revenue</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th colspan="2"><center>Total</center></th>
                    <th><%= @total_revenue %></th>
                </tr>
            </tfoot>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Service</td>
                    <td><%= @total_service_revenue %></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Commission</td>
                    <td><%= @total_commission_revenue %></td>
                </tr>
                
            </tbody>
        </table>
<% end %>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

<script>
	$(document).ready(function() {
    	$('#service-table').DataTable();
        $('#commission-table').DataTable();
        $('#all-table').DataTable();
	} );
</script>